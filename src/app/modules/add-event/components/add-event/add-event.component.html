<tui-island>
  <tui-tabs [(activeItemIndex)]="activeItemIndex">
    <button
      *ngFor="let item of items"
      tuiTab
      tuiRipple="var(--tui-text-01)"
    >
      <span class="material-icons-outlined">
        {{ item.icon }}
      </span>
      <span class="tab-label">
        {{ item.text }}
      </span>

    </button>
  </tui-tabs>

  <form
    class="sport-type-form"
    [class.hide]="activeItemIndex !== 0"
    [formGroup]="eventForm"
  >
    <div tuiGroup class="sport-type-inner" orientation="vertical" [collapsed]="true">
      <tui-radio-block
        contentAlign="right"
        formControlName="sportType"
        item="BICYCLE"
        size="m"
      >
        Велосипед
      </tui-radio-block>
      <tui-radio-block
        contentAlign="right"
        formControlName="sportType"
        item="RUN"
        size="m"
      >
        Бег
      </tui-radio-block>
      <tui-radio-block
        contentAlign="right"
        formControlName="sportType"
        item="ROLLERBLADE"
        size="m"
      >
        Роликовые коньки
      </tui-radio-block>
      <tui-radio-block
        contentAlign="right"
        formControlName="sportType"
        item="SKI"
        size="m"
      >
        Лыжи
      </tui-radio-block>
    </div>
  </form>

  <form
    class="date-form"
    [class.hide]="activeItemIndex !== 1"
    [formGroup]="eventForm"
  >
    <tui-input-date-time
      formControlName="date"
      [min]="buildCurrentTuiDay()"
    >
      Выберите дату и время
    </tui-input-date-time>
  </form>

  <form
    class="duration-form"
    [class.hide]="activeItemIndex !== 3"
    [formGroup]="eventForm"
  >
    Длительность
  </form>

  <form
    class="description-form"
    [class.hide]="activeItemIndex !== 5"
    [formGroup]="eventForm"
  >
    <tui-text-area
      class="tui-space_bottom-4 field-large"
      formControlName="description"
    >
      Введите описание
    </tui-text-area>
  </form>

  <mgl-map
    [class.hide]="activeItemIndex !== 2"
    [style]="'mapbox://styles/mapbox/streets-v11'"
    [attributionControl]="false"
    [doubleClickZoom]="false"
    [zoom]="15"
    [preserveDrawingBuffer]="true"
    [center]="[ 39.949127487394094,43.414052415946685 ]"
    (mapLoad)="onMapboxLoad($event)"
    (mapClick)="onMapClick($event)"
  >
    <mgl-geojson-source
      id="geojson-route"
      [data]="geoJsonFeature"
    >
    </mgl-geojson-source>
    <mgl-layer
      id="route"
      type="line"
      source="geojson-route"
      [paint]="{
      'line-color': '#FC6719',
      'line-width': 4
    }"
    >
    </mgl-layer>
    <mgl-control mglNavigation></mgl-control>
  </mgl-map>

  <!--  <button (click)="generatePreview()">Preview</button>-->
  <!--  <button (click)="generateTrack()">Track</button>-->
  <!--  <button (click)="hideMap()">Hide</button>-->
  <!--  <button (click)="onResize()">Resize</button>-->
  <!--  <img [attr.src]="preview">-->

  <div class="actions">
    <button
      *ngIf="activeItemIndex !== 0"
      tuiButton
      appearance="secondary"
      size="m"
      class="back"
    >
      Назад
    </button>

    <button
      *ngIf="activeItemIndex !== 5"
      tuiButton
      appearance="primary"
      size="m"
      class="forward"
    >
      Далее
    </button>
  </div>

</tui-island>
